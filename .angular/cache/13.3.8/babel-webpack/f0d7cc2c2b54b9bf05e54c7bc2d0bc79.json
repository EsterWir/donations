{"ast":null,"code":"import { CaptchaService } from '~shared/services/captcha.service';\nimport * as i0 from \"@angular/core\";\nexport let CaptchaInterceptor = /*#__PURE__*/(() => {\n  class CaptchaInterceptor {\n    /**\r\n     * ApiInterceptor constructor\r\n     *\r\n     * @param injector\r\n     */\n    constructor(injector) {\n      this.injector = injector;\n    }\n    /**\r\n     * Get injected UohSpinner\r\n     */\n\n\n    get captchaService() {\n      return this.injector.get(CaptchaService);\n    }\n    /**\r\n     *\r\n     * @param request\r\n     * @param next\r\n     * @returns {Ovservable<any>}\r\n     */\n\n\n    intercept(request, next) {\n      const headers = request.headers;\n      const shouldValidate = headers.get(CaptchaInterceptor.SHOULD_VALIDATE_RECAPTCHA_HEADER);\n\n      if (shouldValidate != 'true') {\n        return next.handle(request.clone());\n      }\n\n      const reCaptchaResponse = this.captchaService.getResponse() || '';\n      return next.handle(request.clone({\n        setHeaders: {\n          [CaptchaInterceptor.RECAPTCHA_RESPONSE_HEADER]: reCaptchaResponse\n        }\n      }));\n    }\n\n  }\n\n  CaptchaInterceptor.RECAPTCHA_RESPONSE_HEADER = 'Uoh-reCaptcha-Response';\n  CaptchaInterceptor.SHOULD_VALIDATE_RECAPTCHA_HEADER = 'Uoh-Interceptor-Captcha-Should-Validate-reCaptcha';\n\n  CaptchaInterceptor.ɵfac = function CaptchaInterceptor_Factory(t) {\n    return new (t || CaptchaInterceptor)(i0.ɵɵinject(i0.Injector));\n  };\n\n  CaptchaInterceptor.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CaptchaInterceptor,\n    factory: CaptchaInterceptor.ɵfac\n  });\n  return CaptchaInterceptor;\n})();","map":null,"metadata":{},"sourceType":"module"}